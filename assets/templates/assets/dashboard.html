{% extends "assets/base.html" %}

{% block content %}
    <h1>Executive Dashboard</h1>
    
    <div style="background: #eef; padding: 15px; border-radius: 5px;">
        <h3>Total Asset Valuation: ${{ total_asset_value }}</h3>
    </div>

    <!-- Export to CSV button -->
    <a href="{% url 'export-csv' %}" class="btn btn-success my-3">ðŸ“¥ Export to CSV</a>

    <h3>Inventory Breakdown</h3>
    <ul>
        {% for item in assets_by_type %}
            <li>{{ item.asset_type }}: <strong>{{ item.count }} units</strong></li>
        {% empty %}
            <li>No assets found.</li>
        {% endfor %}
    </ul>
    
    <h3>Cost by Department</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Department</th>
                <th>Total Asset Cost</th>
            </tr>
        </thead>
        <tbody>
            {% for dept in cost_by_department %}
                <tr>
                    <td>{{ dept.name }}</td>
                    <td>${{ dept.total_cost }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2">No departmental asset data available.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}